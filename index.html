<!DOCTYPE html>
<html>
<head>
    <title>Cosmetology and Barbering Programs</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.79.0/dist/L.Control.Locate.min.css" />

    <style>
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; font-family: 'Segoe UI', Arial, sans-serif; display: flex; overflow: hidden; }
        
        #sidebar {
            width: 320px; height: 100vh; background: #f8f9fa; border-right: 1px solid #ddd;
            display: flex; flex-direction: column; z-index: 2000; flex-shrink: 0;
        }
        
        #sidebar-header { padding: 20px; background: #000000; color: white; }
        #sidebar-header h2 { margin: 0; font-size: 18px; }
        #search-box { padding: 15px; background: #fff; border-bottom: 1px solid #eee; }
        #school-search { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
        
        #school-list { flex-grow: 1; overflow-y: auto; list-style: none; margin: 0; padding: 0; }
        .school-item { padding: 12px 20px; border-bottom: 1px solid #eee; cursor: pointer; transition: 0.2s; }
        .school-item:hover { background: #ffeef6; }
        .school-item h4 { margin: 0 0 4px 0; font-size: 14px; color: #d63384; }
        .school-item p { margin: 0; font-size: 12px; color: #666; }

        /* Ensuring the map has a visible background while loading */
        #map { flex-grow: 1; height: 100vh; background: #ddd; }
    
        .popup-card h3 { margin: 0; color: #d63384; font-size: 16px; border-bottom: 2px solid #f8f9fa; padding-bottom: 5px; }
        .popup-card p { margin: 8px 0; font-size: 13px; color: #333; }
        .btn-group { display: flex; gap: 5px; margin-top: 10px; }
        .btn { flex: 1; text-align: center; color: white !important; padding: 8px; border-radius: 4px; text-decoration: none; font-weight: bold; font-size: 11px; }
        .btn-web { background: #d63384; }
        .btn-call { background: #28a745; }
    </style>
</head>
<body>

<div id="sidebar">
    <div id="sidebar-header"><h2>Houston Area HS Cosmetology and Barbering Programs</h2></div>
    <div id="search-box">
        <input type="text" id="school-search" placeholder="Filter by name or district..." onkeyup="filterList()">
    </div>
    <ul id="school-list"></ul>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.79.0/dist/L.Control.Locate.min.js" charset="utf-8"></script>

<script>
    let map, markers = {};

    window.onload = function() {
        // Initialize Map
        map = L.map('map').setView([29.7604, -95.3698], 11);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: 'Â© OpenStreetMap'
        }).addTo(map);

        // Add Locate Control (The "Find Me" button)
        L.control.locate({
            position: 'topright',
            strings: { title: "Show my location" },
            flyTo: true,
            keepCurrentZoomLevel: false
        }).addTo(map);

        // Crucial fix: ensures map tiles fill the container
        setTimeout(() => { map.invalidateSize(); }, 200);

        loadLocations();
    };

    const locations = [
        { name: "Aldine High School", dist: "Aldine ISD", co: [29.9077, -95.3905], type: "Cosmo", tel: "281-878-0647", url: "https://aldineisd.org" },
        { name: "Alief Center for Advanced Careers", dist: "Alief ISD", co: [29.7289, -95.5964], type: "Cosmo", tel: "281-498-8110", url: "https://aliefisd.net" },
        { name: "Angleton HS (Wildcat Style)", dist: "Angleton ISD", co: [29.1822, -95.4294], type: "Barber/Cosmo", tel: "979-864-8001", url: "https://angletonisd.net" },
        { name: "Ball High School", dist: "Galveston ISD", co: [29.2882, -94.8083], type: "Cosmo", tel: "409-766-5700", url: "https://ball.gisd.org" },
        { name: "Barbers Hill High School", dist: "Barbers Hill ISD", co: [29.8519, -94.8983], type: "Cosmo", tel: "281-385-6714", url: "https://bhisd.net" },
        { name: "Brazosport HS CTE", dist: "Brazosport ISD", co: [28.9575, -95.3564], type: "Cosmo", tel: "979-730-7000", url: "https://brazosportisd.net" },
        { name: "Carl Wunsche Sr. High", dist: "Spring ISD", co: [30.0784, -95.4225], type: "Cosmo", tel: "281-891-7650", url: "https://cwhs.springisd.org" },
        { name: "Channelview High School", dist: "Channelview ISD", co: [29.8119, -95.1147], type: "Cosmo", tel: "281-452-1450", url: "https://cvisd.org" },
        { name: "Clear View High School", dist: "Clear Creek ISD", co: [29.5311, -95.1225], type: "Cosmo", tel: "281-284-1500", url: "https://clearview.ccisd.net" },
        { name: "Crosby High School", dist: "Crosby ISD", co: [29.9119, -95.0613], type: "Cosmo", tel: "281-328-9200", url: "https://crosbyisd.org" },
        { name: "Cypress Park High School", dist: "Cy-Fair ISD", co: [29.8943, -95.7042], type: "Cosmo", tel: "281-897-4036", url: "https://cfisd.net" },
        { name: "Davis High School", dist: "Aldine ISD", co: [29.9678, -95.4258], type: "Cosmo", tel: "281-539-4070", url: "https://davishs.aldineisd.org" },
        { name: "Dickinson High School", dist: "Dickinson ISD", co: [29.4583, -95.0594], type: "Barber/Cosmo", tel: "281-229-6400", url: "https://dickinsonisd.org" },
        { name: "Dr. Kirk Lewis CTHS", dist: "Pasadena ISD", co: [29.6206, -95.2015], type: "Cosmo", tel: "713-740-0370", url: "https://careerandtechnical.pasadenaisd.org" },
        { name: "Humble High Barbering Academy", dist: "Humble ISD", co: [29.9912, -95.2536], type: "Barber", tel: "281-641-6300", url: "https://humbleisd.net" },
        { name: "James Madison High School", dist: "Houston ISD", co: [29.6231, -95.4206], type: "Cosmo", tel: "713-733-3600", url: "https://houstonisd.org/madison" },
        { name: "James Reese Career Tech", dist: "Fort Bend ISD", co: [29.5638, -95.6425], type: "Cosmo", tel: "281-327-7300", url: "https://fortbendisd.com/jrctc" },
        { name: "JB Hensler College & Career", dist: "Alvin ISD", co: [29.4891, -95.3486], type: "Barber/Cosmo", tel: "281-245-2160", url: "https://alvinisd.net" },
        { name: "Klein Forest High School", dist: "Klein ISD", co: [29.9575, -95.4892], type: "Cosmo", tel: "832-484-4500", url: "https://kleinisd.net" },
        { name: "Miller Career & Tech Center", dist: "Katy ISD", co: [29.7997, -95.8239], type: "Cosmo", tel: "281-396-7600", url: "https://mctc.katyisd.org" },
        { name: "Northside High School", dist: "Houston ISD", co: [29.7820, -95.3582], type: "Barber", tel: "713-226-4900", url: "https://northside.houstonisd.org" },
        { name: "Royal High School", dist: "Royal ISD", co: [29.7788, -95.9105], type: "Cosmo", tel: "281-934-2215", url: "https://royal-isd.net" },
        { name: "Sharpstown High School", dist: "Houston ISD", co: [29.7045, -95.5037], type: "Cosmo", tel: "713-771-7215", url: "https://houstonisd.org/sharpstown" },
        { name: "Stuart Career Tech High", dist: "Goose Creek CISD", co: [29.7719, -94.9542], type: "Barber/Cosmo", tel: "281-420-4535", url: "https://schools.gccisd.net" },
        { name: "Texas City High School", dist: "Texas City ISD", co: [29.4005, -94.9430], type: "Cosmo", tel: "409-916-0800", url: "https://tcisd.org" },
        { name: "The Guthrie Center", dist: "Spring Branch ISD", co: [29.8145, -95.5601], type: "Cosmo", tel: "713-251-1300", url: "https://guthriecenter.springbranchisd.com/programs/co" },
        { name: "Tomball High School", dist: "Tomball ISD", co: [30.0930, -95.6263], type: "Cosmo", tel: "281-357-3220", url: "https://tomballisd.net" }
    ];

    function loadLocations() {
        const listElement = document.getElementById('school-list');
        locations.sort((a, b) => a.name.localeCompare(b.name));

        locations.forEach((loc) => {
            const marker = L.circleMarker(loc.co, {
                radius: 10, fillColor: loc.type.includes("Barber") ? "#007bff" : "#e83e8c",
                color: "#fff", weight: 2, fillOpacity: 0.9
            }).addTo(map).bindPopup(`
                <div class="popup-card">
                    <h3>${loc.name}</h3>
                    <p><b>District:</b> ${loc.dist}<br><b>Program:</b> ${loc.type}</p>
                    <div class="btn-group">
                        <a href="${loc.url}" target="_blank" class="btn btn-web">Website</a>
                        <a href="tel:${loc.tel}" class="btn btn-call">Call</a>
                    </div>
                </div>
            `);

            const li = document.createElement('li');
            li.className = 'school-item';
            li.innerHTML = `<h4>${loc.name}</h4><p>${loc.dist}</p>`;
            li.onclick = () => { map.setView(loc.co, 15); marker.openPopup(); };
            listElement.appendChild(li);
        });
    }

    function filterList() {
        const val = document.getElementById('school-search').value.toLowerCase();
        const items = document.querySelectorAll('.school-item');
        items.forEach(item => {
            item.style.display = item.innerText.toLowerCase().includes(val) ? 'block' : 'none';
        });
    }
</script>
</body>
</html>